import * as React from "react";
import { useState } from "react";
import { useHistory } from "react-router-dom";
import { Icon, Navbar, Nav } from "rsuite";
import { IconNames } from "rsuite/lib/Icon";

import "./navbar.css";

interface IItem {
	key: number;
	label: string;
	position: "left" | "right";
	icon?: IconNames;
	path: string;
}

interface IProps {
	items: IItem[];
}

export default ({ items }: IProps) => {
	let history = useHistory();

	const [activeKey, setActiveKey] = useState(1);

	const _handleSelect = (key: number) => {
		setActiveKey(key);
		history.push(items.filter((i) => i.key === key)[0].path);
	};

	return (
		<Navbar>
			<Navbar.Header>
				<img
					width={200}
					height={40}
					src={require("../../../assets/img/MalwareAI_Logo_Full_White2x.png")}
				/>
			</Navbar.Header>
			<Navbar.Body>
				{items.filter((i) => i.position === "left").length ? (
					<Nav onSelect={_handleSelect} activeKey={activeKey}>
						{items
							.filter((i) => i.position === "left")
							.map((item) => (
								<Nav.Item
									eventKey={item.key}
									icon={item.icon ? <Icon icon={item.icon} /> : undefined}
								>
									{item.label}
								</Nav.Item>
							))}
					</Nav>
				) : null}

				{items.filter((i) => i.position === "right").length ? (
					<Nav onSelect={_handleSelect} activeKey={activeKey} pullRight>
						{items
							.filter((i) => i.position === "right")
							.map((item) => (
								<Nav.Item
									eventKey={item.key}
									icon={item.icon ? <Icon icon={item.icon} /> : undefined}
								>
									{item.label}
								</Nav.Item>
							))}
					</Nav>
				) : null}
			</Navbar.Body>
		</Navbar>
	);
};
